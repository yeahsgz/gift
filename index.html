<!DOCTYPE html>
<html>
<head lang="zh-Hans">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,user-scalable=no,initial-scale=1,maximum-scale=1,minimum-scale=1">
    <meta name="renderer" content="webkit">
    <meta http-equiv="Cache-Control" content="no-transform">
    <meta name="applicable-device" content="mobile">
    <title>摇出你的新年礼物</title>
    <meta name="format-detection" content="telephone=no">
    <meta name="wap-font-scale" content="no">
    <style>
        *{
            margin  :0;
            padding :0;
        }

        .gift-logo-wrap{
            margin :20px auto;
            width  :280px;
            height :280px;
        }

        .gift-logo{
            display :block;
            width   :100%;
            height  :100%;
        }

        .text-align-c{
            text-align :center;
        }

        .font-size36{
            font-size :28px;
        }

        .font-size32{
            font-size :24px;
        }
    </style>
</head>
<body>

<div class="">
    <div class="gift-logo-wrap">
        <img class="gift-logo" src="http://iph.href.lu/400x400" alt=""/>
    </div>
    <div class="font-size36 text-align-c">
        晃动屏幕
    </div>
    <div class="font-size32 text-align-c">领取我的专属礼物</div>
</div>
<script src="http://cdn.static.runoob.com/libs/jquery/1.10.2/jquery.min.js"></script>
<script>
    $(document).ready(function () {
        var speed = 25;

        var x = t = z = lastX = lastY = lastZ = 0;

        var allowDevice = true;
        //判断系统是否支持html5摇一摇的相关属性
        if (window.DeviceMotionEvent) {

            window.addEventListener('devicemotion',
                    function () {
                        var acceleration = event.accelerationIncludingGravity;
                        x = acceleration.x;
                        y = acceleration.y;
                        if (Math.abs(x - lastX) > speed || Math.abs(y - lastY) > speed) {

                            // 判断要不要执行
                            if (!allowDevice)return false;

                            allowDevice = true;


                            //手机震动1秒
                            if (navigator.vibrate) {
                                navigator.vibrate(1000);//震动1000毫秒
                            } else if (navigator.webkitVibrate) {
                                navigator.webkitVibrate(1000);
                            }

                            //打开弹窗
                            setTimeout(function () {
                                alert('恭喜你摇到了');
                            }, 1000);
                        }
                        ;
                        lastX = x;
                        lastY = y;
                    }, false);
        }
        else {
            alert('不支持摇一摇');
        }
    });
</script>
</body>
</html>